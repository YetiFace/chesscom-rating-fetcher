<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Download | Opponent Rating Fetcher</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="styles.css" rel="stylesheet">
</head>
<body>
  <main class='container mb-5'>
    <div class='row mb-3'>
      <h1 class='text-center paper my-4 py-2 mx-auto rounded text-wrap-balance'>Please wait whilst your request is processed.</h1>
    </div>
    <div class='row mb-3'>
      <div class='col-md-4 position-relative'>
        <button class="btn btn-sm btn-secondary btn-collapse position-absolute" type="button" data-bs-toggle="collapse" data-bs-target="#params" aria-expanded="false" aria-controls="params">
          &#8595;
        </button>
        <h3>Search Parameters</h3>
        <div class='collapse' id='params'></div>
      </div>
      <div class='col-md-4 position-relative'>
        <button class="btn btn-sm btn-secondary btn-collapse position-absolute" type="button" data-bs-toggle="collapse" data-bs-target="#api-log" aria-expanded="false" aria-controls="api-log">
          &#8595;
        </button>
        <h3>API Endpoints</h3>
          <div id='api-log' class='collapse overflow-auto'>
          </div>
      </div>
      <div class='col-md-4 position-relative'>
        <div>
          <button class="btn btn-sm btn-secondary btn-collapse position-absolute" type="button" data-bs-toggle="collapse" data-bs-target="#stat-log" aria-expanded="true" aria-controls="stat-log">
            &#8595;
          </button>
          <h3>Dataset Stats</h3>
          <div id="stat-log" class="collapse show">
            <p>Total Games: <span class="game-count float-end fw-bold">0</span></p>
            <div class='streak'>
              <p>Win Streaks: <span class="win-count float-end fw-bold">0</span></p>
              <p>Unbeaten Streaks: <span class="unbeaten-count float-end fw-bold">0</span></p>
              <p>Kramnik Streaks: <span class="kramnik-count float-end fw-bold">0</span></p>
              <p><em>(More details will be shown below when the data has fully processed)</em></p>
            </div>
          </div>
        </div>
        
      </div>
    </div>
    <div class='row mb-2'>
      <div class='col-sm-4 mb-2'>
        <a class="btn btn-secondary w-100" href="index.html" role="button">Return Home</a>
      </div>
      <div class='col-sm-4 mb-2'>
        <a class="btn btn-info w-100 csv-download disabled" role="button"> Download CSV</a>
      </div>
      <div class='col-sm-4 mb-2'>
        <a class="btn btn-warning w-100 json-download disabled" role="button">Download JSON</a>
      </div>
    </div>
  </main>
    <div class='container-fluid streak'>
      <div class='row'>
        <div class='col-lg-4 mb-3 position-relative'>
          <button class="btn btn-sm btn-secondary btn-collapse position-absolute" type="button" data-bs-toggle="collapse" data-bs-target="#win-table" aria-expanded="true" aria-controls="win-table">
            &#8595;
          </button>
          <div class='table-title p-1'>
            <h3 class='mb-0'>Win Streaks</h3>
            <em>Wins Only</em>
          </div>
          <div id="win-table" class="streak-table collapse show">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Score</th>
                  <th scope="col">Time Class</th>
                  <th scope="col">Av. Player Rating</th>
                  <th scope="col">Av. Opponent Rating</th>
                  <th scope="col">Rating Diff</th>
                  <th scope="col">Start Date</th>
                  <th scope="col">End Date</th>
                </tr>
              </thead>
              <tbody class='win-streak-tbody'>
              </tbody>
            </table>
          </div>
        </div>

        <div class='col-lg-4 mb-3 position-relative'>
          <button class="btn btn-sm btn-secondary btn-collapse position-absolute" type="button" data-bs-toggle="collapse" data-bs-target="#unbeaten-table" aria-expanded="true" aria-controls="unbeaten-table">
            &#8595;
          </button>
          <div class='table-title p-1'>
            <h3 class='mb-0'>Unbeaten Streaks</h3>
            <em>Wins and Draws</em>
          </div>
          <div id="unbeaten-table" class="streak-table collapse show">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Score</th>
                  <th scope="col">Time Class</th>
                  <th scope="col">Av. Player Rating</th>
                  <th scope="col">Av. Opponent Rating</th>
                  <th scope="col">Rating Diff</th>
                  <th scope="col">Start Date</th>
                  <th scope="col">End Date</th>
                </tr>
              </thead>
              <tbody class='unbeaten-streak-tbody'>
              </tbody>
            </table>
          </div>          
        </div>

        <div class='col-lg-4 mb-3 position-relative'>
          <button class="btn btn-sm btn-secondary btn-collapse position-absolute" type="button" data-bs-toggle="collapse" data-bs-target="#kramnik-table" aria-expanded="true" aria-controls="kramnik-table">
            &#8595;
          </button>
          <div class='table-title p-1'>
            <h3 class='mb-0'>Kramnik Streaks</h3>
            <em>One Draw Allowed Between 5 and 25 Wins.</em>
          </div>
          <div id='kramnik-table' class="streak-table collapse show">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Score</th>
                  <th scope="col">Time Class</th>
                  <th scope="col">Av. Player Rating</th>
                  <th scope="col">Av. Opponent Rating</th>
                  <th scope="col">Rating Diff</th>
                  <th scope="col">Start Date</th>
                  <th scope="col">End Date</th>
                </tr>
              </thead>
              <tbody class='kramnik-streak-tbody'>
              </tbody>
            </table>
         </div>
        </div>

      </div>
    </div>
  
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="results.js"></script>
    
</body>
</html>